<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pharmaceutical Pricing - DSCSA Compliance | BizTrack</title>
  <meta name="description" content="FDA DSCSA-compliant pharmaceutical supply chain verification. From $199/month. Self-service compliance software.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #f0f4f8;
      color: #1e293b;
      line-height: 1.6;
    }

    .main-with-sidebar {
      margin-left: 280px;
      min-height: 100vh;
      padding: 3rem 2rem;
    }

    /* Hero */
    .hero {
      max-width: 1200px;
      margin: 0 auto 4rem;
      text-align: center;
      padding: 4rem 2rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);
    }

    .hero h1 {
      font-size: 3.5rem;
      font-weight: 900;
      color: white;
      margin-bottom: 1rem;
      line-height: 1.1;
      letter-spacing: -0.02em;
    }

    .hero p {
      font-size: 1.5rem;
      color: rgba(255, 255, 255, 0.95);
      margin-bottom: 1.5rem;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      font-weight: 500;
    }

    .hero-subtext {
      font-size: 1.125rem;
      color: rgba(255, 255, 255, 0.85);
      max-width: 800px;
      margin: 0 auto;
    }

    .hero-badges {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }

    .hero-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: white;
      font-size: 1rem;
      font-weight: 600;
    }

    .hero-badge i {
      font-size: 1.5rem;
    }

    /* Pricing Grid */
    .pricing-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-bottom: 3rem;
      align-items: start;
    }

    .pricing-tier {
      background: white;
      border-radius: 20px;
      padding: 2.5rem 2rem;
      border: 3px solid #e2e8f0;
      transition: all 0.3s;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .pricing-tier:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      border-color: #667eea;
    }

    .pricing-tier.popular {
      border-color: #667eea;
      box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
    }

    .pricing-tier.current-plan {
      border-color: #10b981;
      box-shadow: 0 10px 40px rgba(16, 185, 129, 0.3);
    }

    .popular-badge {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 0.5rem 1.25rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 700;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .current-plan-badge {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      padding: 0.5rem 1.25rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 700;
      box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .tier-name {
      font-size: 2rem;
      font-weight: 800;
      color: #0f172a;
      margin-bottom: 0.5rem;
      margin-top: 0.5rem;
    }

    .tier-price {
      font-size: 3rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .tier-price span {
      font-size: 1.25rem;
      color: #64748b;
      font-weight: 600;
    }

    .tier-volume {
      font-size: 1.125rem;
      color: #64748b;
      margin-bottom: 2rem;
      font-weight: 600;
    }

    .tier-description {
      font-size: 0.95rem;
      color: #64748b;
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid #e2e8f0;
      line-height: 1.5;
    }

    .tier-features {
      list-style: none;
      margin-bottom: 2rem;
      flex-grow: 1;
    }

    .tier-features li {
      padding: 0.75rem 0;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      font-size: 1rem;
      color: #334155;
    }

    .tier-features i {
      color: #10b981;
      font-size: 1.25rem;
      margin-top: 0.125rem;
      flex-shrink: 0;
    }

    .cta-button {
      width: 100%;
      padding: 1.25rem 2rem;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1.125rem;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.5);
    }

    .cta-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .cta-button.current {
      background: #10b981;
      cursor: default;
    }

    .cta-button.current:hover {
      transform: none;
      box-shadow: none;
    }

    .cta-button.downgrade {
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }

    /* Manage Section */
    .manage-section {
      max-width: 1200px;
      margin: 0 auto 3rem;
      background: white;
      border: 2px solid #E2E8F0;
      border-radius: 16px;
      padding: 2rem;
      display: none;
    }

    .manage-section.show {
      display: block;
    }

    .manage-section h3 {
      color: #1E293B;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .manage-card {
      background: #FEF2F2;
      border: 1px solid #FCA5A5;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      max-width: 400px;
    }

    .manage-card h4 {
      color: #DC2626;
      font-size: 1.125rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .manage-card p {
      color: #64748B;
      font-size: 0.95rem;
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    .manage-card button {
      padding: 0.75rem 1.5rem;
      background: #DC2626;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .manage-card button:hover {
      background: #B91C1C;
      transform: translateY(-1px);
    }

    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: white;
      border-radius: 16px;
      max-width: 500px;
      width: 100%;
      padding: 2rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .modal-header h3 {
      font-size: 1.5rem;
      font-weight: 800;
      color: #1E293B;
      flex-grow: 1;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #64748B;
      cursor: pointer;
      padding: 0.25rem;
      line-height: 1;
      transition: color 0.2s;
    }

    .modal-close:hover {
      color: #1E293B;
    }

    .modal-content p {
      color: #64748B;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .modal-buttons {
      display: flex;
      gap: 1rem;
    }

    .modal-button {
      flex: 1;
      padding: 1rem;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .modal-button.primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }

    .modal-button.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    .modal-button.danger {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
    }

    .modal-button.danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
    }

    .modal-button.secondary {
      background: white;
      color: #64748B;
      border: 2px solid #E2E8F0;
    }

    .modal-button.secondary:hover {
      background: #F8FAFC;
      border-color: #CBD5E1;
    }

    .modal-success {
      text-align: center;
      padding: 2rem 1rem;
    }

    .modal-success .success-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #10B981, #059669);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      color: white;
      font-size: 2.5rem;
    }

    .modal-success h4 {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1E293B;
      margin-bottom: 0.5rem;
    }

    .modal-success p {
      font-size: 1rem;
      margin-bottom: 2rem;
    }

    /* Rest of existing styles... */
    .comparison-section {
      max-width: 1200px;
      margin: 3rem auto;
      padding: 3rem 2rem;
      background: white;
      border-radius: 20px;
      border: 2px solid #e2e8f0;
    }

    .comparison-section h2 {
      font-size: 2rem;
      font-weight: 800;
      color: #0f172a;
      margin-bottom: 1rem;
      text-align: center;
    }

    .comparison-section p {
      text-align: center;
      color: #64748b;
      font-size: 1.125rem;
      margin-bottom: 2rem;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .comparison-item {
      text-align: center;
      padding: 1.5rem;
    }

    .comparison-item h3 {
      font-size: 1.25rem;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 0.5rem;
    }

    .comparison-item .price {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .comparison-item .label {
      font-size: 0.9rem;
      color: #64748b;
    }

    .comparison-highlight {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      border: 2px solid #667eea;
      border-radius: 12px;
    }

    .dscsa-section {
      max-width: 1200px;
      margin: 3rem auto;
      padding: 3rem 2rem;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
      border-radius: 20px;
      border: 2px solid #667eea;
    }

    .dscsa-section h2 {
      font-size: 2.5rem;
      font-weight: 800;
      color: #0f172a;
      margin-bottom: 1.5rem;
      text-align: center;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .dscsa-intro {
      text-align: center;
      font-size: 1.25rem;
      color: #334155;
      margin-bottom: 3rem;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.7;
    }

    .dscsa-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .dscsa-card {
      background: white;
      padding: 2rem;
      border-radius: 16px;
      border: 2px solid #e2e8f0;
      transition: all 0.3s;
    }

    .dscsa-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
      border-color: #667eea;
    }

    .dscsa-card h3 {
      font-size: 1.5rem;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .dscsa-card h3 i {
      color: #667eea;
      font-size: 1.75rem;
    }

    .dscsa-card p {
      color: #64748b;
      line-height: 1.6;
      font-size: 1rem;
    }

    .dscsa-card ul {
      list-style: none;
      margin-top: 1rem;
    }

    .dscsa-card ul li {
      padding: 0.5rem 0;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      color: #334155;
    }

    .dscsa-card ul li i {
      color: #10b981;
      margin-top: 0.25rem;
    }

    .includes-section {
      max-width: 1200px;
      margin: 3rem auto;
      padding: 2rem;
      background: white;
      border-radius: 16px;
      border: 2px solid #e2e8f0;
    }

    .includes-section h2 {
      font-size: 1.75rem;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .includes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .includes-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      color: #334155;
      font-weight: 500;
    }

    .includes-item i {
      color: #667eea;
      font-size: 1.25rem;
    }

    .contact-section {
      max-width: 800px;
      margin: 3rem auto 0;
      text-align: center;
      padding: 2rem;
      background: white;
      border-radius: 16px;
      border: 2px solid #e2e8f0;
    }

    .contact-section h2 {
      font-size: 1.75rem;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 1rem;
    }

    .contact-links {
      display: flex;
      gap: 2rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 1.5rem;
    }

    .contact-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.125rem;
      transition: all 0.2s;
    }

    .contact-link:hover {
      color: #764ba2;
      transform: translateX(3px);
    }

    .footer {
      background: #0f172a;
      color: #94a3b8;
      padding: 3rem 2rem 2rem;
      margin-left: 280px;
      margin-top: 4rem;
      text-align: center;
    }

    @media (max-width: 968px) {
      .pricing-container {
        grid-template-columns: 1fr;
      }

      .pricing-tier.popular {
        transform: scale(1);
      }
    }

    @media (max-width: 768px) {
      .main-with-sidebar,
      .footer {
        margin-left: 0;
      }

      .hero {
        padding: 3rem 1.5rem;
      }

      .hero h1 {
        font-size: 2rem;
      }

      .hero p {
        font-size: 1.125rem;
      }

      .modal-buttons {
        flex-direction: column-reverse;
      }
    }
  </style>
</head>
<body>

  <!-- Sidebar (auto-loads) -->
  <div id="pharma-sidebar-container"></div>

  <!-- Main Content -->
  <main class="main-with-sidebar">
    
    <!-- Hero -->
    <div class="hero">
      <h1>DSCSA Compliance Made Simple</h1>
      <p>Self-service compliance software • From $199/month</p>
      <p class="hero-subtext">Real DSCSA compliance with unlimited partners, locations, and users. No "free plan" gotchas. No hidden enterprise fees. Blockchain-verified from $199/month.</p>
      
      <div class="hero-badges">
        <div class="hero-badge">
          <i class="fas fa-shield-check"></i> FDA DSCSA Ready
        </div>
        <div class="hero-badge">
          <i class="fas fa-check-circle"></i> GS1 Compatible
        </div>
        <div class="hero-badge">
          <i class="fas fa-cloud"></i> Blockchain Verified
        </div>
        <div class="hero-badge">
          <i class="fas fa-infinity"></i> Infinite Storage
        </div>
      </div>
    </div>

    <!-- Pricing Tiers -->
    <div class="pricing-container">
      
      <!-- Starter Compliance -->
      <div class="pricing-tier" id="tier-pharma_starter">
        <h2 class="tier-name">Starter</h2>
        <div class="tier-price">$199<span> / month</span></div>
        <div class="tier-volume">1,000 QR codes per month</div>
        <p class="tier-description">Perfect for single-location compounding pharmacies and small dispensers</p>
        
        <ul class="tier-features">
          <li><i class="fas fa-check-circle"></i> 1,000 smart QR codes / month</li>
          <li><i class="fas fa-check-circle"></i> GS1-compliant serialization</li>
          <li><i class="fas fa-check-circle"></i> Transaction documentation (TI/TS)</li>
          <li><i class="fas fa-check-circle"></i> Infinite blockchain retention</li>
          <li><i class="fas fa-check-circle"></i> IPFS storage</li>
          <li><i class="fas fa-check-circle"></i> Basic EPCIS export</li>
          <li><i class="fas fa-check-circle"></i> Email support (48hr response)</li>
        </ul>
        
        <button class="cta-button" onclick="selectPlan('pharma_starter')">
          Get Started
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Professional Compliance -->
      <div class="pricing-tier popular" id="tier-pharma_professional">
        <div class="popular-badge">MOST POPULAR</div>
        <h2 class="tier-name">Professional</h2>
        <div class="tier-price">$599<span> / month</span></div>
        <div class="tier-volume">5,000 QR codes per month</div>
        <p class="tier-description">Complete DSCSA toolkit for multi-location pharmacies and small distributors</p>
        
        <ul class="tier-features">
          <li><i class="fas fa-check-circle"></i> <strong>Everything in Starter</strong></li>
          <li><i class="fas fa-check-circle"></i> 5,000 QR codes / month</li>
          <li><i class="fas fa-check-circle"></i> ATP verification</li>
          <li><i class="fas fa-check-circle"></i> Returns processing workflow</li>
          <li><i class="fas fa-check-circle"></i> Quarantine management</li>
          <li><i class="fas fa-check-circle"></i> Advanced EPCIS export</li>
          <li><i class="fas fa-check-circle"></i> API access</li>
          <li><i class="fas fa-check-circle"></i> Priority support (24hr response)</li>
        </ul>
        
        <button class="cta-button" onclick="selectPlan('pharma_professional')">
          Get Started
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Enterprise Compliance -->
      <div class="pricing-tier" id="tier-pharma_enterprise">
        <h2 class="tier-name">Enterprise</h2>
        <div class="tier-price">$1,499<span> / month</span></div>
        <div class="tier-volume">50,000 QR codes per month</div>
        <p class="tier-description">Enterprise-grade infrastructure for regional distributors and specialty pharma</p>
        
        <ul class="tier-features">
          <li><i class="fas fa-check-circle"></i> <strong>Everything in Professional</strong></li>
          <li><i class="fas fa-check-circle"></i> 50,000 QR codes / month</li>
          <li><i class="fas fa-check-circle"></i> VRS integration</li>
          <li><i class="fas fa-check-circle"></i> Custom API integrations</li>
          <li><i class="fas fa-check-circle"></i> SLA guarantees (99.9%)</li>
          <li><i class="fas fa-check-circle"></i> FDA audit-ready reports</li>
          <li><i class="fas fa-check-circle"></i> White-label options</li>
          <li><i class="fas fa-check-circle"></i> Priority support (12hr response)</li>
        </ul>
        
        <button class="cta-button" onclick="selectPlan('pharma_enterprise')">
          Get Started
          <i class="fas fa-arrow-right"></i>
        </button>
      </div>

    </div>

    <!-- Manage Subscription Section (shown only for paid users) -->
    <div class="manage-section" id="manageSection">
      <h3>Manage Your Subscription</h3>
      <div class="manage-card">
        <h4><i class="fas fa-times-circle"></i> Need to Cancel?</h4>
        <p>Your subscription will remain active until the end of your billing period.</p>
        <button onclick="showCancelModal()">
          <i class="fas fa-times-circle"></i> Cancel Subscription
        </button>
      </div>
    </div>

    <!-- DSCSA COMPLIANCE SECTION -->
    <div class="dscsa-section">
      <h2>Full FDA DSCSA Compliance</h2>
      <p class="dscsa-intro">
        BizTrack provides complete Drug Supply Chain Security Act (DSCSA) compliance out of the box. 
        Built specifically for pharmaceutical manufacturers, distributors, repackagers, and dispensers to meet 
        FDA's November 2023 Enhanced Drug Distribution Security requirements.
      </p>

      <div class="dscsa-grid">
        
        <div class="dscsa-card">
          <h3>
            <i class="fas fa-shield-alt"></i>
            Product Tracing
          </h3>
          <p>Complete unit-level serialization and verification for every product in your supply chain.</p>
          <ul>
            <li><i class="fas fa-check"></i> Transaction Information (TI)</li>
            <li><i class="fas fa-check"></i> Transaction Statement (TS)</li>
            <li><i class="fas fa-check"></i> Transaction History (TH)</li>
            <li><i class="fas fa-check"></i> GS1-compliant 2D barcodes</li>
          </ul>
        </div>

        <div class="dscsa-card">
          <h3>
            <i class="fas fa-database"></i>
            Blockchain Verification
          </h3>
          <p>Immutable proof of authenticity using XRP Ledger's enterprise blockchain technology.</p>
          <ul>
            <li><i class="fas fa-check"></i> Tamper-proof records</li>
            <li><i class="fas fa-check"></i> Real-time verification</li>
            <li><i class="fas fa-check"></i> Infinite blockchain storage</li>
            <li><i class="fas fa-check"></i> IPFS decentralized storage</li>
          </ul>
        </div>

        <div class="dscsa-card">
          <h3>
            <i class="fas fa-exchange-alt"></i>
            ATP Verification
          </h3>
          <p>Authorized Trading Partner (ATP) verification to ensure secure pharmaceutical supply chains.</p>
          <ul>
            <li><i class="fas fa-check"></i> Partner credentials validation</li>
            <li><i class="fas fa-check"></i> License verification tracking</li>
            <li><i class="fas fa-check"></i> Suspicious order monitoring</li>
            <li><i class="fas fa-check"></i> Quarantine management</li>
          </ul>
        </div>

        <div class="dscsa-card">
          <h3>
            <i class="fas fa-file-medical"></i>
            Returns & Recalls
          </h3>
          <p>FDA-compliant product returns processing and recall management workflows.</p>
          <ul>
            <li><i class="fas fa-check"></i> Saleable returns verification</li>
            <li><i class="fas fa-check"></i> Product investigation tracking</li>
            <li><i class="fas fa-check"></i> Batch/lot recall management</li>
            <li><i class="fas fa-check"></i> Disposition documentation</li>
          </ul>
        </div>

        <div class="dscsa-card">
          <h3>
            <i class="fas fa-chart-line"></i>
            EPCIS Integration
          </h3>
          <p>Electronic Product Code Information Services (EPCIS) for seamless data exchange.</p>
          <ul>
            <li><i class="fas fa-check"></i> EPCIS 1.2 / 2.0 support</li>
            <li><i class="fas fa-check"></i> Interoperable data formats</li>
            <li><i class="fas fa-check"></i> VRS-ready infrastructure</li>
            <li><i class="fas fa-check"></i> API-first architecture</li>
          </ul>
        </div>

        <div class="dscsa-card">
          <h3>
            <i class="fas fa-clipboard-check"></i>
            Audit-Ready Reports
          </h3>
          <p>Comprehensive audit trails and reporting for FDA inspections and compliance verification.</p>
          <ul>
            <li><i class="fas fa-check"></i> Complete chain of custody</li>
            <li><i class="fas fa-check"></i> Serialization event tracking</li>
            <li><i class="fas fa-check"></i> Exception handling logs</li>
            <li><i class="fas fa-check"></i> One-click FDA report generation</li>
          </ul>
        </div>

      </div>
    </div>

    <!-- Comparison Section -->
    <div class="comparison-section">
      <h2>Transparent Pricing. No Gotchas.</h2>
      <p>Unlike "free" platforms with hidden limits or enterprise solutions with setup fees, we're upfront about everything</p>
      
      <div class="comparison-grid">
        <div class="comparison-item">
          <h3>TrackTraceRX "Free"</h3>
          <div class="price">$0*</div>
          <div class="label">*1 location, 1 partner, 1 user<br>Real pricing hidden</div>
        </div>
        
        <div class="comparison-item comparison-highlight">
          <h3>BizTrack Starter</h3>
          <div class="price">$199</div>
          <div class="label">Unlimited locations, partners, users<br>1,000 QR codes/month</div>
        </div>
        
        <div class="comparison-item">
          <h3>TraceLink / MasterControl</h3>
          <div class="price">$8,000+</div>
          <div class="label">per month + $10k-50k setup<br>Enterprise only</div>
        </div>
        
        <div class="comparison-item comparison-highlight">
          <h3>BizTrack Enterprise</h3>
          <div class="price">$1,499</div>
          <div class="label">50,000 QR codes/month<br>$0 setup • Full features</div>
        </div>
      </div>
    </div>

    <!-- Includes Section -->
    <div class="includes-section">
      <h2>All Plans Include</h2>
      <div class="includes-grid">
        <div class="includes-item">
          <i class="fas fa-shield-alt"></i>
          Blockchain verification (XRPL)
        </div>
        <div class="includes-item">
          <i class="fas fa-database"></i>
          IPFS decentralized storage
        </div>
        <div class="includes-item">
          <i class="fas fa-qrcode"></i>
          GS1-compliant QR generation
        </div>
        <div class="includes-item">
          <i class="fas fa-mobile-alt"></i>
          Consumer scan portal
        </div>
        <div class="includes-item">
          <i class="fas fa-file-alt"></i>
          Transaction documentation (TI/TS)
        </div>
        <div class="includes-item">
          <i class="fas fa-infinity"></i>
          Infinite immutable retention
        </div>
      </div>
    </div>

    <!-- Contact Section -->
    <div class="contact-section">
      <h2>Questions?</h2>
      <p style="color: #64748b; margin-bottom: 0;">Need help choosing a plan? We're here to help.</p>
      
      <div class="contact-links">
        <a href="mailto:info@biztrack.io" class="contact-link">
          <i class="fas fa-envelope"></i>
          info@biztrack.io
        </a>
      </div>
      <p style="color: #94a3b8; font-size: 0.875rem; margin-top: 1rem;">
        Typical response time: 24-48 hours
      </p>
    </div>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-copyright">
      <p>&copy; 2025 BizTrack - Built by Aventra LLC | Powered by XRPL | FDA-Ready Since Day One</p>
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modal">
      <!-- Dynamic content loaded by JS -->
    </div>
  </div>

  <script src="js/auth.js"></script>
  <script src="js/pharma-sidebar.js"></script>
  
  <script>
    const API_BASE = window.location.hostname === 'localhost' ? 'http://localhost:3000' : '';
    
    // Tier hierarchy for comparison
    const TIER_ORDER = ['free', 'pharma_starter', 'pharma_professional', 'pharma_enterprise'];
    
    const TIER_NAMES = {
      'pharma_starter': 'Starter',
      'pharma_professional': 'Professional',
      'pharma_enterprise': 'Enterprise'
    };

    let currentUserTier = 'free';
    let pendingDowngradeTier = null;

    // ==========================================
    // LOAD USER TIER ON PAGE LOAD
    // ==========================================
    async function loadUserTier() {
      const token = localStorage.getItem('biztrack-auth-token');
      
      if (!token) {
        console.log('[PRICING] No auth token - user not logged in');
        return;
      }

      try {
        const response = await fetch(`${API_BASE}/api/user`, {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        if (!response.ok) throw new Error('Failed to load user data');

        const data = await response.json();
        currentUserTier = data.subscription_tier || 'free';
        
        console.log('[PRICING] User current tier:', currentUserTier);
        
        // Show manage section for paid users
        if (currentUserTier !== 'free') {
          document.getElementById('manageSection').classList.add('show');
        }
        
        // Update UI based on current tier
        updatePricingUI(currentUserTier);

      } catch (error) {
        console.error('[PRICING] Error loading user tier:', error);
      }
    }

    // ==========================================
    // UPDATE UI BASED ON CURRENT TIER
    // ==========================================
    function updatePricingUI(currentTier) {
      const currentIndex = TIER_ORDER.indexOf(currentTier);

      TIER_ORDER.forEach((tier, index) => {
        const tierElement = document.getElementById(`tier-${tier}`);
        if (!tierElement) return;

        const button = tierElement.querySelector('.cta-button');
        if (!button) return;

        // Remove existing badges
        const existingBadges = tierElement.querySelectorAll('.current-plan-badge');
        existingBadges.forEach(badge => badge.remove());

        // Hide popular badge if viewing
        const popularBadge = tierElement.querySelector('.popular-badge');

        if (tier === currentTier) {
          // Current plan
          tierElement.classList.add('current-plan');
          tierElement.classList.remove('popular');
          if (popularBadge) popularBadge.style.display = 'none';
          
          // Add "Current Plan" badge
          const badge = document.createElement('div');
          badge.className = 'current-plan-badge';
          badge.textContent = 'CURRENT PLAN';
          tierElement.insertBefore(badge, tierElement.firstChild);
          
          // Update button
          button.classList.add('current');
          button.disabled = true;
          button.innerHTML = '<i class="fas fa-check-circle"></i> Current Plan';
          button.onclick = null;
          
        } else if (index > currentIndex) {
          // Upgrade
          button.classList.remove('current', 'downgrade');
          button.disabled = false;
          button.innerHTML = '<i class="fas fa-arrow-up"></i> Upgrade';
          button.onclick = () => selectPlan(tier);
          
        } else if (index < currentIndex) {
          // Downgrade
          button.classList.add('downgrade');
          button.classList.remove('current');
          button.disabled = false;
          button.innerHTML = '<i class="fas fa-arrow-down"></i> Downgrade';
          button.onclick = () => showDowngradeModal(tier);
        }
      });
    }

    // ==========================================
    // SELECT PLAN (CHECKOUT FOR NEW/UPGRADE)
    // ==========================================
    async function selectPlan(tier) {
      const token = localStorage.getItem('biztrack-auth-token');
      
      if (!token) {
        // Not logged in - redirect to register
        window.location.href = `/register.html?plan=${tier}`;
        return;
      }

      try {
        const response = await fetch(`${API_BASE}/api/create-checkout-session`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          },
          body: JSON.stringify({ tier: tier })
        });

        const data = await response.json();

        if (data.success && data.url) {
          // Redirect to Stripe checkout
          window.location.href = data.url;
        } else {
          throw new Error(data.error || 'Failed to create checkout session');
        }

      } catch (error) {
        console.error('Checkout error:', error);
        alert('Failed to start checkout. Please try again or contact support.');
      }
    }

    // ==========================================
    // DOWNGRADE MODAL
    // ==========================================
    function showDowngradeModal(tierKey) {
      pendingDowngradeTier = tierKey;
      const tierName = TIER_NAMES[tierKey] || tierKey;
      const modal = document.getElementById('modal');
      const overlay = document.getElementById('modalOverlay');
      
      modal.innerHTML = `
        <div class="modal-header">
          <h3><i class="fas fa-arrow-down" style="color: #f59e0b;"></i> Confirm Downgrade</h3>
          <button class="modal-close" onclick="closeModal()">×</button>
        </div>
        <div class="modal-content">
          <p><strong>Are you sure you want to downgrade to ${tierName}?</strong></p>
          <p>Your plan will change at the end of your current billing period. You'll keep your current features until then.</p>
        </div>
        <div class="modal-buttons">
          <button class="modal-button secondary" onclick="closeModal()">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button class="modal-button primary" onclick="processDowngrade()">
            <i class="fas fa-check"></i> Yes, Downgrade
          </button>
        </div>
      `;
      
      overlay.classList.add('show');
    }

    async function processDowngrade() {
      const modal = document.getElementById('modal');
      
      modal.innerHTML = `
        <div class="modal-content" style="text-align: center; padding: 2rem;">
          <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: #667eea; margin-bottom: 1rem;"></i>
          <p>Processing your request...</p>
        </div>
      `;
      
      try {
        const token = localStorage.getItem('biztrack-auth-token');
        
        const response = await fetch(`${API_BASE}/api/downgrade-subscription`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          },
          body: JSON.stringify({
            newTier: pendingDowngradeTier
          })
        });
        
        const data = await response.json();
        
        if (data.success) {
          const tierName = TIER_NAMES[pendingDowngradeTier] || pendingDowngradeTier;
          modal.innerHTML = `
            <div class="modal-success">
              <div class="success-icon">
                <i class="fas fa-check"></i>
              </div>
              <h4>Downgrade Scheduled!</h4>
              <p>Your plan will change to ${tierName} at the end of your billing period.</p>
              <button class="modal-button primary" onclick="closeModal()" style="width: 100%;">Got it</button>
            </div>
          `;
        } else {
          throw new Error(data.error || 'Failed to process downgrade');
        }
      } catch (error) {
        console.error('Downgrade error:', error);
        modal.innerHTML = `
          <div class="modal-header">
            <h3><i class="fas fa-exclamation-circle" style="color: #ef4444;"></i> Error</h3>
            <button class="modal-close" onclick="closeModal()">×</button>
          </div>
          <div class="modal-content">
            <p>Something went wrong. Please try again or contact support at <a href="mailto:info@biztrack.io" style="color: #667eea;">info@biztrack.io</a></p>
          </div>
          <button class="modal-button primary" onclick="closeModal()" style="width: 100%;">Close</button>
        `;
      }
    }

    // ==========================================
    // CANCEL MODAL
    // ==========================================
    function showCancelModal() {
      const modal = document.getElementById('modal');
      const overlay = document.getElementById('modalOverlay');
      
      modal.innerHTML = `
        <div class="modal-header">
          <h3><i class="fas fa-times-circle" style="color: #ef4444;"></i> Cancel Subscription</h3>
          <button class="modal-close" onclick="closeModal()">×</button>
        </div>
        <div class="modal-content">
          <p><strong>Are you sure you want to cancel?</strong></p>
          <p>Your subscription will remain active until the end of your billing period. After that, you'll lose access to premium features.</p>
        </div>
        <div class="modal-buttons">
          <button class="modal-button secondary" onclick="closeModal()">
            <i class="fas fa-times"></i> Keep Subscription
          </button>
          <button class="modal-button danger" onclick="processCancel()">
            <i class="fas fa-check"></i> Yes, Cancel
          </button>
        </div>
      `;
      
      overlay.classList.add('show');
    }

    async function processCancel() {
      const modal = document.getElementById('modal');
      
      modal.innerHTML = `
        <div class="modal-content" style="text-align: center; padding: 2rem;">
          <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: #667eea; margin-bottom: 1rem;"></i>
          <p>Processing your request...</p>
        </div>
      `;
      
      try {
        const token = localStorage.getItem('biztrack-auth-token');
        
        const response = await fetch(`${API_BASE}/api/cancel-subscription`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          },
          body: JSON.stringify({})
        });
        
        const data = await response.json();
        
        if (data.success) {
          modal.innerHTML = `
            <div class="modal-success">
              <div class="success-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                <i class="fas fa-check"></i>
              </div>
              <h4>Cancellation Confirmed</h4>
              <p>Your subscription will end at the end of your billing period. We're sorry to see you go!</p>
              <button class="modal-button primary" onclick="closeModal()" style="width: 100%;">Got it</button>
            </div>
          `;
        } else {
          throw new Error(data.error || 'Failed to process cancellation');
        }
      } catch (error) {
        console.error('Cancel error:', error);
        modal.innerHTML = `
          <div class="modal-header">
            <h3><i class="fas fa-exclamation-circle" style="color: #ef4444;"></i> Error</h3>
            <button class="modal-close" onclick="closeModal()">×</button>
          </div>
          <div class="modal-content">
            <p>Something went wrong. Please try again or contact support at <a href="mailto:info@biztrack.io" style="color: #667eea;">info@biztrack.io</a></p>
          </div>
          <button class="modal-button primary" onclick="closeModal()" style="width: 100%;">Close</button>
        `;
      }
    }

    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('show');
      pendingDowngradeTier = null;
    }

    // Close modal when clicking overlay
    document.getElementById('modalOverlay').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });

    // ==========================================
    // INIT ON PAGE LOAD
    // ==========================================
    document.addEventListener('DOMContentLoaded', () => {
      loadUserTier();
    });
  </script>
</body>
</html>
